<template name="views_README">
  {{#Surface}}
    <div id="main" role="main">
    	<h1>Using Views from Famous</h1>

    	<p>There has been a little confusion about the role of the famous-views
    	package.
    	Famous-views is <b>primarily</b> a low level wrapped around Famous,
    	and <b>secondarily</b> will provide pre-built views for common Famous
    	views (and ultimately, their prebuilt components too).</p>

    	<p>To clarify, <b>you don't need to see a view listed in this package
    	to be able to use it</b>.  Famous-views can as easily wrap <b>any
    	famous view</b>, that we haven't added yet, that someone in the community
    	wrote that's not part of official Famo.us and you downloaded, etc, etc.
        Of course, if you do anything cool, send us a pull request on Github!</p>

    	<h2>Registering a new View</h2>

    	{{#sh_highlight lang="js"}}
    		famousCmp.registerView('Scrollview', famous.views.Scrollview);
    	{{/sh_highlight}}

    	<p>This let's you do:</p>

    	{{#sh_highlight lang="html"}}
    		{{dstache}}#ScrollView arg1=blah arg2=etc}}
    		  ...
    		{{dstache}}/ScrollView}}
    	{{/sh_highlight}}

    	<p>and also:</p>

    	{{#sh_highlight lang="html"}}
    		{{dstache}}>Scrollview template=name arg2=etc}}
    	{{/sh_highlight}}

    	<h3>Out of the Box</h3>

    	<ul>
    		<li><p>Child templates will call <code>add()</code>, or be added
    			to an array for <code>sequenceFrom()</code> if the view provides it.
    			In the case of the latter, <code>{{dstache}}#famousEach}}</code>
    			may be used.</p></li>

    		<li><p>Arguments will be automatically decoded like all other view
    		examples; strings like <code>dimensions="[3,3]"</code> are translated
    		to the appropriate object, or functions (template helpers) may be
        provided instead.  For reactivity, see the next section below.</p></li>

        <li><p>If no modifier is specified, but typical arguments for a 
        StateModifier are given, e.g.
        <code>size="[100,100]"</code>, a StateModifier is automatically
        prepended to the Render Tree as part of the CompView node.</p></li>

    		<li><p>When called like <code>{{dstache}}>View template="x"}}</code>,
    		of course all the regular Meteor template stuff applies, so you can
    		do things in <code>Template.x.rendered = function() { }</code>, setup
    		helpers for children, etc.</p></li>
    	</ul>

    	<h3>Advanced Views</h3>

    	{{#sh_highlight lang="js"}}
				famousCmp.registerView('MyView', myViewClass, {

					// If exists, called instead of the view's own add() method
					add: function(childCompView) {
						var target = childCompView.component._templateInstance.data.target;
						if (!target)
							throw new Error("HeaderFooterLayout must specify target='header/footer/content'");
						// `this` is the CompView object for this instance
						this.view[target].add(childCompView);
					},

					// If exists, called when an attribute is reactively updated
					attrUpdate: function(key, value, data, firstTime) {
						// `this` is the CompView object for this instance
					  switch(key) {
					    case "specialX":
					    case "specialY":
					      this.view.setSpecial(key, value);
					      break;
					  }      
					}

					// If exists, called after adding the node to the render tree
					famousCreatedPost: function() {
						// `this` is the CompView object for this instance
						this.pipeChildrenTo = this.parent.pipeChildrenTo
							? [ this.view, this.parent.pipeChildrenTo[0] ]
							: [ this.view ];
					}

				});
    	{{/sh_highlight}}

    	<p>See some <a href="https://github.com/gadicc/meteor-famous-components/tree/master/lib/views">actual examples</a> from the source code of our pre-built
    	views.</p>

   	</div>
  {{/Surface}}
</template>